<template>
  <div>
    <keep-alive>
      <router-view @log-change="logChange"></router-view>
    </keep-alive>

    <footer class="footer-wrap">
      <router-link to="/articles" class="footer-menu" replace>
        <div class="footer-menu-icon article">
          <svg
            t="1604882197923"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="1025"
            width="64"
            height="64"
          >
            <path
              d="M623.786667 627.958519l-94.814815-274.204445a25.220741 25.220741 0 0 0-9.481482-12.98963 39.158519 39.158519 0 0 0-40.58074 0 25.220741 25.220741 0 0 0-9.481482 12.98963l-93.677037 273.066667c-4.266667 12.515556-3.508148 21.238519 2.085926 26.453333a31.194074 31.194074 0 0 0 22.376296 7.774815 30.814815 30.814815 0 0 0 21.522963-6.637037 44.847407 44.847407 0 0 0 11.282963-17.445926l20.100741-52.148148h92.065185l21.712593 54.518518a43.045926 43.045926 0 0 0 10.429629 15.54963 28.444444 28.444444 0 0 0 21.048889 6.162963 32.142222 32.142222 0 0 0 22.376297-8.059259c5.688889-5.214815 6.637037-13.463704 3.034074-25.031111zM464.592593 533.617778l35.176296-112.82963 34.891852 112.82963zM718.696296 632.225185a29.677037 29.677037 0 0 1-7.111111 21.997037 30.340741 30.340741 0 0 1-22.85037 7.300741 28.444444 28.444444 0 0 1-22.471111-7.300741 30.814815 30.814815 0 0 1-6.637037-21.428148V364.373333q0-29.013333 29.013333-29.013333A33.564444 33.564444 0 0 1 711.111111 341.333333a27.117037 27.117037 0 0 1 7.774815 22.186667z"
              fill="#acb961"
              p-id="1026"
            ></path>
            <path
              d="M555.804444 56.888889a410.074074 410.074074 0 0 0-409.41037 409.41037 35.460741 35.460741 0 0 0 0 4.930371c-28.444444 29.297778-88.746667 96.331852-88.746667 143.454814 0 52.148148 49.303704 72.248889 84.48 73.386667l40.106667 9.007408 7.585185 197.025185a73.765926 73.765926 0 0 0 74.145185 73.007407h150.281482a29.297778 29.297778 0 1 0 0-58.500741H263.964444a14.980741 14.980741 0 0 1-14.885925-14.885926l-9.481482-243.768888-87.04-18.962963-3.034074-0.663704h-3.318519a64.948148 64.948148 0 0 1-19.911111-4.551111c-9.481481-3.792593-9.481481-7.300741-9.481481-10.619259 0-16.971852 37.262222-68.171852 79.549629-109.700741a29.297778 29.297778 0 0 0 7.300741-29.771852 28.444444 28.444444 0 0 0 1.422222-9.007407 350.814815 350.814815 0 0 1 701.62963 0c0 16.308148 29.297778 29.297778 29.297778 29.297777s29.297778-12.98963 29.297778-29.297777A409.979259 409.979259 0 0 0 555.804444 56.888889z"
              fill="#acb961"
              p-id="1027"
            ></path>
            <path
              d="M860.728889 291.271111s146.299259 247.751111-81.92 485.451852c0 0-11.282963 50.725926 47.407407 36.124444 0 0 163.555556-134.542222 136.912593-392.438518z"
              fill="#acb961"
              p-id="1028"
            ></path>
          </svg>
        </div>
        AI能力
      </router-link>
      <router-link to="/topics" class="footer-menu" replace>
        <div class="footer-menu-icon community">
          <svg
            t="1604882562997"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="4491"
            width="64"
            height="64"
          >
            <path
              d="M511.972 0.5c-218.106 0-404.299 136.562-477.843 328.821l79.097 0c21.456-46.774 51.28-89.855 88.754-127.331 82.806-82.811 192.897-128.419 309.992-128.419 117.111 0 227.216 45.608 310.031 128.421C904.82 284.805 950.429 394.9 950.429 512c0 117.108-45.608 227.209-128.422 310.018-82.813 82.807-192.922 128.411-310.035 128.411-117.099 0-227.19-45.604-309.994-128.409-37.477-37.477-67.301-80.562-88.761-127.341L34.125 694.679C107.666 886.95 293.862 1023.5 511.976 1023.5c282.498 0 511.524-228.999 511.524-511.5C1023.5 229.529 794.474 0.5 511.972 0.5zM399.796 667.009l51.669 51.669L658.143 512 451.465 305.322l-51.671 51.67 118.475 118.472L0.5 475.464l0 73.072 517.769 0L399.796 667.009z"
              p-id="4492"
              fill="#acb961"
            ></path>
          </svg>
        </div>
        接入方法
      </router-link>
      <router-link to="/resources" class="footer-menu" replace>
        <div class="footer-menu-icon resource">
          <svg
            t="1604882647606"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="5082"
            width="64"
            height="64"
          >
            <path
              d="M794.1 1018.8H211.9c-93 0-168.6-75.7-168.6-168.6V268c0-93 75.6-168.6 168.6-168.6h266.3c12.8 0 23.1 10.3 23.1 23.1s-10.3 23.1-23.1 23.1H211.9c-67.5 0-122.4 54.9-122.4 122.4v582.2c0 67.5 54.9 122.4 122.4 122.4h582.2c67.5 0 122.4-54.9 122.4-122.4V482.5c0-12.8 10.3-23.1 23.1-23.1s23.1 10.3 23.1 23.1v367.7c0 92.9-75.6 168.6-168.6 168.6zM378.7 707.2c11.8-27.9 23.3-54.7 34.6-80.4 5.3 5.3 13.1 7.8 21 6.2 278.2-58.6 407.3-186.3 384.2-379.7 91.5-1.1 142.1-19.9 158.3-58.5 17.1-40.7-8.1-92.1-81.1-163.2C862.9 5.3 826.5-3.1 787.5 6.8 664.4 37.9 516.7 261.2 336.2 689.2c-5 11.7 0.6 25.3 12.3 30.2 2.9 1.2 6 1.8 9 1.8 9 0.1 17.5-5.2 21.2-14z m486.5-641c76.1 74.3 72.1 103.5 69.1 110.7-3.3 7.7-23.1 32.7-142.2 30.1-6.8-0.5-13.6 2.8-18.1 8.1-4.5 5.3-6.4 12.4-5.1 19.2 33.8 180.5-76.7 295.7-337.7 352.1 183.8-408.6 300.4-518 367.6-535 6.7-1.7 13.3-2.5 19.6-2.5 17 0.1 32.6 6 46.8 17.3z"
              p-id="5083"
              fill="#acb961"
            ></path>
          </svg>
        </div>
        隐私条款
      </router-link>
      <!-- <router-link to="/projects" class="footer-menu" replace>
            <div class="footer-menu-icon project"></div>我的
        </router-link> -->
      <router-link to="/user" class="footer-menu" replace>
        <div class="footer-menu-icon user">
          <svg
            t="1604882685291"
            class="icon"
            viewBox="0 0 1024 1024"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="5927"
            width="64"
            height="64"
          >
            <path
              d="M737 647c-5.625-5.625-11.25-11.25-16.875-11.25-16.875 0-28.125 11.25-28.125 28.125 0 11.25 5.625 16.875 11.25 22.5C770.75 737 815.75 815.75 821.375 905.75h50.625c-5.625-106.875-56.25-196.875-135-258.75M523.25 551.375c-101.25 0-185.625-84.375-185.625-185.625C332 258.875 416.375 174.5 523.25 174.5 624.5 174.5 708.875 258.875 708.875 360.125c0 106.875-84.375 191.25-185.625 191.25zM765.125 365.75C765.125 230.75 658.25 118.25 517.625 118.25c-129.375 0-241.875 106.875-241.875 247.5 0 90 50.625 168.75 123.75 213.75-140.625 39.375-241.875 168.75-247.5 326.25H202.625c5.625-163.125 140.625-292.5 303.75-298.125H523.25c135 0 241.875-106.875 241.875-241.875z"
              p-id="5928"
              fill="#acb961"
            ></path>
          </svg>
        </div>
        {{ userTxt }}
      </router-link>
    </footer>
    <s-modal ref="modal"></s-modal>
    <s-loading ref="loading"></s-loading>
    <s-toast ref="toast"></s-toast>
  </div>
</template>

<script>
import Modal from "./components/Modal.vue";
import Loading from "./components/Loading.vue";
import Toast from "./components/Toast.vue";
import ModalEventBind from "./components/ModalEventBind";
import LoadingEventBind from "./components/LoadingEventBind";
import { isLogin } from "./components/TokenUtils";

export default {
  name: "app",
  components: {
    [Modal.name]: Modal,
    [Loading.name]: Loading,
    [Toast.name]: Toast,
  },
  data() {
    return {
      userTxt: "我的",
    };
  },
  methods: {
    logChange: function () {
      this.changeTxt();
    },
    changeTxt: function () {
      isLogin((hasLogin) => {
        if (hasLogin) {
          this.userTxt = "我的";
        } else {
          this.userTxt = "未登录";
        }
      });
    },
  },
  mounted: function () {
    ModalEventBind(this.$refs.modal);
    LoadingEventBind(this.$refs.loading);

    this.changeTxt();

  },
};
</script>

<style lang="scss">
@import "sass/App.scss";
</style>
